# マスター登録する

## 1.撮影位置に移動  
ロボットをジョグ動作などで、ワークを撮影できる位置に移動します。

## 2.撮影する  
撮影はロボット言語の下表のサブルーチンを呼出すことで行います。サンプルプログラムにも同命令があるので、これを実行します。サブルーチンはいくつかの基本命令で構成されているので、一連の命令を全て実行し、呼び出した次の行に戻ってくるまでステップ実行します。

|リクエスト略号|Motoman|Fanuc|Melfa|
|:---|:---|:---|:---|
|X1|CALL JOB:ROVI_CAPTURE|ﾖﾋﾞﾀﾞｼ ROVI_CAPTURE|Gosub *X1|

撮影に成功すると、下図のようにワークの3Dデータが取り込まれます。
![Capture](img/tp2.png)

![Watch out](img/watch.png)失敗した場合は、サンプルプログラムでは、再びサブルーチン呼出の前の行まで戻ります。

![Watch out](img/watch.png)再撮影時は3Dデータをクリアしてください。クリアは以下のサブルーチンで行います。  

|リクエスト略号|Motoman|Fanuc|Melfa|
|:---|:---|:---|:---|
|X0|CALL JOB:ROVI_RESET|ﾖﾋﾞﾀﾞｼ ROVI_RESET|Gosub *X0|
![Watch out](img/watch.png)撮影テクニックの詳細はAppendixの[撮影のポイント](HackCapture.md)を参考

![Watch out](img/watch.png)設定パネルの【2.位相シフト撮影/3Dボタン】での撮影は機種によって可・不可があります。

||Motoman|Fanuc|Melfa|Nachi|Kuka|
|:---|:---|:---|:---|:---|:---|
|TB/PC両面操作|○|×|○| | |


## 3.加工する  
撮影した3Dデータには、背景の台などワーク以外のものが含まれます。マスターデータにはこれらを含まないものを登録しなければなりません。背景を削除する最も簡単な方法は、点のすくいとり機能です。これは次のように使います。
1. ランチャーからセットアップを選び、設定パネルを表示する
2. 【3.クロップ/すくいワールド】にて取りたい点数を入力します
3. 鉛直上側から入力された点数分が表示されます
4. 背景がなくなるように点数を調整します

![Capture](img/tp3.png)

## 4.登録する  
設定パネルの
1. 【4.マスター管理/マスター登録】にて登録する
2. 【3.クロップ/すくいワールド】を元の値に戻す

